buildscript {
    repositories {
        mavenCentral()
    }
    dependencies {
        classpath 'net.sf.proguard:proguard-gradle:5.2.1'
    }
}

apply plugin: 'java'

sourceCompatibility = 1.6

dependencies {
    compile 'org.slf4j:slf4j-api:1.7.8'
    compile 'ch.qos.logback:logback-classic:1.1.7'
    compile 'com.google.guava:guava:19.0'
    testCompile 'junit:junit:4.12'
}

jar {
    manifest {
        attributes 'Implementation-Title': 'MailBannana',
                'Implementation-Version': version,
                'Main-Class': 'com.devsmart.mailbannana.Main'
    }

    baseName = 'MailBannana'

}

task proguard(type: proguard.gradle.ProGuardTask, dependsOn: jar) {
    configuration 'proguard.txt'

    injars jar.outputs
    injars files(configurations.compile.collect())
    //libraryjars files(configurations.compile.collect())
    outjars 'build/libs/mailbannana-proguard.jar'
    libraryjars "${System.getProperty('java.home')}/lib/rt.jar"
}